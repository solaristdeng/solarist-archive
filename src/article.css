/* src/article.css
   Project: Brutalist Blog
   Direction: Content-first B/W editorial book design
   Keywords: page-canon margins, baseline rhythm, restrained hierarchy,
             sparse breakouts, print-like quotes & code
*/

/* ========================================================= */
/* 0. Tokens (B/W + neutral paper tones)                      */
/* ========================================================= */
:root{
  --ink:#000;
  --paper:#fff;
  --ash:#e9e9e9;
  --ash-2:#f6f6f6;

  --grid:8px;                 /* baseline unit */
  --measure:72ch;             /* text line length */

  --rule:2px solid var(--ink);
  --rule-strong:3px solid var(--ink);

  --h1:clamp(2.2rem,4.2vw,3.2rem);
  --h2:clamp(1.7rem,3.0vw,2.3rem);
  --h3:clamp(1.35rem,2.2vw,1.75rem);
  --body:clamp(1.10rem,1.6vw,1.32rem);
}

/* Optional pure B/W dark mode */
@media (prefers-color-scheme: dark){
  :root{
    --ink:#fff;
    --paper:#000;
    --ash:#1a1a1a;
    --ash-2:#111;
  }
}

/* ========================================================= */
/* 1. Global reset                                            */
/* ========================================================= */
html{
  box-sizing:border-box;
  scrollbar-width:none;
}
*,*::before,*::after{ box-sizing:inherit; }
body{ -ms-overflow-style:none; }
::-webkit-scrollbar{ display:none; }

/* Brutal = no rounding anywhere */
.markdown-body,
.markdown-body *{ border-radius:0 !important; }

/* Selection = ink inversion */
.markdown-body ::selection{
  background:var(--ink);
  color:var(--paper);
}

/* ========================================================= */
/* 2. Page / Text block (book “page canon” feel)              */
/* ========================================================= */
.markdown-body{
  font-family:
    -apple-system,BlinkMacSystemFont,
    "Segoe UI","Roboto","Helvetica Neue","Arial",
    "Noto Sans SC","PingFang SC","Hiragino Sans GB",
    "Microsoft YaHei","微软雅黑","Source Han Sans SC",
    sans-serif,"Apple Color Emoji","Segoe UI Emoji";

  color:var(--ink);
  background:transparent;
  line-height:1.75;
  font-size:var(--body);
  text-rendering:optimizeLegibility;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;

  max-width:var(--measure);
  margin-inline:auto;

  /* page canon margins: top/inner tighter, bottom/outer looser */
  padding-inline:clamp(16px,4vw,32px);
  padding-top:clamp(18px,4vw,34px);
  padding-bottom:clamp(52px,8vw,100px);
}

/* Three-column layout with margin notes */
.markdown-body-with-sidenotes {
  font-family:
    -apple-system,BlinkMacSystemFont,
    "Segoe UI","Roboto","Helvetica Neue","Arial",
    "Noto Sans SC","PingFang SC","Hiragino Sans GB",
    "Microsoft YaHei","微软雅黑","Source Han Sans SC",
    sans-serif,"Apple Color Emoji","Segoe UI Emoji";

  color:var(--ink);
  background:transparent;
  line-height:1.75;
  font-size:var(--body);
  text-rendering:optimizeLegibility;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;

  max-width: 1400px;
  margin: 0 auto;
  
  padding-inline:clamp(16px,3vw,48px);
  padding-top:clamp(18px,4vw,34px);
  padding-bottom:clamp(52px,8vw,100px);
}

/* Main content area - leave room for sidenotes */
.markdown-body-with-sidenotes > *:not(.footnotes) {
  max-width: 65ch;
  margin-left: 0;
  margin-right: auto;
  padding-right: 360px;
}

/* Hide the default footnotes section completely */
.markdown-body-with-sidenotes .footnotes {
  display: block;
  margin-top: calc(var(--grid)*4);
  padding-top: calc(var(--grid)*2);
  border-top: 1px solid #ccc;
  font-size: 0.85rem;
  opacity: 0.7;
}

/* Style for individual sidenotes - inserted inline by JS or CSS */
.markdown-body-with-sidenotes .sidenote,
.markdown-body-with-sidenotes .marginnote {
  float: right;
  clear: right;
  margin-right: -360px;
  width: 300px;
  margin-top: 0;
  margin-bottom: 1.5rem;
  font-size: 0.85rem;
  line-height: 1.5;
  vertical-align: baseline;
  position: relative;
}

/* Mobile: stack layout */
@media (max-width: 1200px) {
  .markdown-body-with-sidenotes > *:not(.footnotes) {
    padding-right: 0;
    max-width: 100%;
  }
  
  .markdown-body-with-sidenotes .footnotes {
    display: block;
    margin-top: calc(var(--grid)*8);
    padding-top: calc(var(--grid)*4);
    border-top: var(--rule);
  }
  
  .markdown-body-with-sidenotes .sidenote,
  .markdown-body-with-sidenotes .marginnote {
    display: none;
  }
}

/* Baseline rhythm: everything lands on grid */
.markdown-body > *,
.markdown-body-with-sidenotes > *{
  margin-top:0;
  margin-bottom:calc(var(--grid)*3);
}

/* ========================================================= */
/* 3. Headings (hierarchy via space & weight, few rules)      */
/* ========================================================= */
.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6,
.markdown-body-with-sidenotes h1,
.markdown-body-with-sidenotes h2,
.markdown-body-with-sidenotes h3,
.markdown-body-with-sidenotes h4,
.markdown-body-with-sidenotes h5,
.markdown-body-with-sidenotes h6{
  font-weight:900;
  letter-spacing:-0.03em;
  line-height:1.08;
  color:var(--ink);
  scroll-margin-top:96px;
}

.markdown-body h1,
.markdown-body-with-sidenotes h1{
  font-size:var(--h1);
  margin-top:calc(var(--grid)*6);
  margin-bottom:calc(var(--grid)*3);
}

.markdown-body h2,
.markdown-body-with-sidenotes h2{
  font-size:var(--h2);
  margin-top:calc(var(--grid)*7);
  margin-bottom:calc(var(--grid)*3);
  padding-bottom:calc(var(--grid)*1.25);
  border-bottom:var(--rule-strong); /* one decisive rule only */
  letter-spacing:-0.02em;
}

.markdown-body h3,
.markdown-body-with-sidenotes h3{
  font-size:var(--h3);
  margin-top:calc(var(--grid)*6);
  margin-bottom:calc(var(--grid)*2);
  font-weight:800;
}

.markdown-body h4,
.markdown-body-with-sidenotes h4{
  font-size:1.15rem;
  margin-top:calc(var(--grid)*5);
  margin-bottom:calc(var(--grid)*2);
  font-weight:800;
  letter-spacing:-0.01em;
}

/* Lead paragraph + quiet drop cap */
.markdown-body h1 + p,
.markdown-body-with-sidenotes h1 + p{
  font-size:clamp(1.2rem,2.0vw,1.5rem);
  font-weight:600;
  letter-spacing:-0.012em;
}
.markdown-body h1 + p::first-letter,
.markdown-body-with-sidenotes h1 + p::first-letter{
  float:left;
  font-size:3.0em;
  line-height:0.85;
  font-weight:900;
  margin-right:0.12em;
  margin-top:0.06em;
}

/* HR as rare section cut */
.markdown-body hr{
  border:0;
  border-top:var(--rule);
  margin:calc(var(--grid)*5) 0;
  opacity:0.9;
}

/* ========================================================= */
/* 4. Paragraphs & inline emphasis                            */
/* ========================================================= */
.markdown-body p{
  font-weight:400;
  letter-spacing:-0.01em;
}
.markdown-body strong{ font-weight:800; }
.markdown-body em{ font-style:italic; font-weight:500; }

/* ========================================================= */
/* 5. Links (print-like: underline only, small inversion)     */
/* ========================================================= */
.markdown-body a{
  color:var(--ink);
  text-decoration:underline;
  text-decoration-thickness:2px;
  text-underline-offset:3px;
  font-weight:650;
  transition:background .08s ease,color .08s ease;
  padding:0 0.06em;
}
.markdown-body a:hover{
  background:var(--ink);
  color:var(--paper);
  text-decoration:none;
}

/* ========================================================= */
/* 6. Lists                                                  */
/* ========================================================= */
.markdown-body ul,
.markdown-body ol{
  padding-left:1.6rem;
}
.markdown-body ul{ list-style-type:square; }
.markdown-body ol{
  list-style-type:decimal;
  font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,"Courier New",monospace;
}
.markdown-body li{
  margin-bottom:calc(var(--grid)*1.5);
  break-inside:avoid;
}

/* ========================================================= */
/* 7. Quotes (external blockquote vs internal pull-quote)     */
/* ========================================================= */
/* clear floats for pull-quotes */
.markdown-body::after{
  content:"";
  display:block;
  clear:both;
}

/* External quote: stays in flow, low-decoration */
.markdown-body blockquote{
  margin:calc(var(--grid)*4) 0;
  padding-left:calc(var(--grid)*2);
  border-left:4px solid var(--ink);
  font-style:italic;
  font-weight:500;
  background:transparent;
}
.markdown-body blockquote p{
  margin-bottom:calc(var(--grid)*1.5);
}
.markdown-body blockquote p:last-child{ margin-bottom:0; }

/* Optional source line */
.markdown-body blockquote cite,
.markdown-body blockquote footer{
  display:block;
  margin-top:calc(var(--grid)*1.5);
  font-style:normal;
  font-weight:700;
  font-size:0.9rem;
  text-transform:uppercase;
  letter-spacing:0.06em;
}

/* Pull quote: rare breakout anchor */
.markdown-body blockquote.pull-quote{
  border:none;
  padding:0;
  font-style:normal;
  font-weight:900;
  font-size:clamp(1.45rem,2.4vw,1.95rem);
  line-height:1.25;
  letter-spacing:-0.02em;
  position:relative;
  margin:calc(var(--grid)*5) 0;
}

/* faint big quote mark */
.markdown-body blockquote.pull-quote::before{
  content:"“";
  position:absolute;
  left:-0.18em;
  top:-0.45em;
  font-size:4.8em;
  font-weight:900;
  line-height:1;
  opacity:0.10;
  pointer-events:none;
}

/* wide screen: float to side like magazine */
@media (min-width:1024px){
  .markdown-body blockquote.pull-quote{
    float:right;
    width:44%;
    margin:0 0 calc(var(--grid)*3) calc(var(--grid)*3);
  }
}

/* ========================================================= */
/* 8. Code (print inset, not UI card)                         */
/* ========================================================= */
.markdown-body pre{
  border:var(--rule);
  background:var(--ash-2);
  color:var(--ink);
  padding:calc(var(--grid)*2.5);
  overflow-x:auto;
  line-height:1.55;
  margin-bottom:calc(var(--grid)*4);
}
.markdown-body code{
  font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,"Courier New",monospace;
  font-size:0.92em;
  font-weight:520;
}
/* inline code = quiet paper tint */
.markdown-body p code,
.markdown-body li code,
.markdown-body table code{
  background:var(--ash);
  padding:0.05em 0.3em;
  margin:0 0.12em;
  font-weight:600;
  border:none;
}
.markdown-body pre code{
  background:transparent;
  padding:0; margin:0;
}

/* ========================================================= */
/* 9. Images / Figures (archival labels)                      */
/* ========================================================= */
.markdown-body img,
.markdown-body figure img{
  border:var(--rule);
  max-width:100%;
  height:auto;
  margin:calc(var(--grid)*3) 0;
}
.markdown-body figcaption{
  font-size:0.9rem;
  font-weight:700;
  text-transform:uppercase;
  letter-spacing:0.06em;
  margin-top:calc(var(--grid)*1.25);
  opacity:0.9;
}

/* ========================================================= */
/* 10. Tables (clean B/W grid)                               */
/* ========================================================= */
.markdown-body table{
  width:100%;
  border-collapse:collapse !important;
  border:var(--rule) !important;
  background:var(--paper);
  margin:calc(var(--grid)*3) 0;
  font-size:0.98rem;
}
.markdown-body th,
.markdown-body td{
  border:1px solid var(--ink) !important;
  padding:calc(var(--grid)*1.25) calc(var(--grid)*1.75);
  text-align:left;
  vertical-align:top;
}
.markdown-body th{
  background:var(--ink) !important;
  color:var(--paper) !important;
  font-weight:900;
  text-transform:uppercase;
  letter-spacing:0.05em;
}
.markdown-body tr:nth-child(even){
  background:var(--ash-2);
}

/* ========================================================= */
/* 11. Footnotes (quiet appendix)                             */
/* ========================================================= */
.markdown-body sup{
  font-size:0.75em;
  font-weight:800;
}
.markdown-body .footnotes{
  margin-top:calc(var(--grid)*8);
  padding-top:calc(var(--grid)*4);
  border-top:var(--rule);
  font-size:0.98rem;
}
.markdown-body .footnotes ol{
  list-style-type:decimal;
  font-family:inherit;
}

/* ========================================================= */
/* 12. Optional editorial utilities (sparingly!)              */
/* ========================================================= */
/* Eyebrow/kicker above H1 */
.markdown-body .kicker{
  font-size:0.82rem;
  font-weight:900;
  text-transform:uppercase;
  letter-spacing:0.12em;
  margin-bottom:calc(var(--grid)*1.25);
}

/* Byline/date row */
.markdown-body .byline{
  font-size:0.95rem;
  font-weight:700;
  text-transform:uppercase;
  letter-spacing:0.06em;
  margin-top:calc(var(--grid)*2);
}

/* Feature box: use for 1–2 moments per article */
.markdown-body .feature{
  border:var(--rule-strong);
  padding:calc(var(--grid)*3);
  margin:calc(var(--grid)*6) 0;
  background:var(--paper);
}

/* Sidenote / marginalia (Chinese/Japanese “旁注感”) */
@media (min-width:1024px){
  .markdown-body .sidenote{
    float:right;
    width:34%;
    margin:0 0 calc(var(--grid)*2) calc(var(--grid)*3);
    font-size:0.98rem;
    line-height:1.6;
    font-weight:600;
    font-style:normal;
  }
}

/* Two-column longform (opt-in with class longform) */
@media (min-width:1024px){
  .markdown-body.longform{
    column-count:2;
    column-gap:clamp(24px,4vw,48px);
    column-rule:1px solid var(--ink);
  }
  .markdown-body.longform h1,
  .markdown-body.longform h2,
  .markdown-body.longform h3,
  .markdown-body.longform hr,
  .markdown-body.longform table,
  .markdown-body.longform pre,
  .markdown-body.longform blockquote,
  .markdown-body.longform figure{
    column-span:all;
  }
}

/* ========================================================= */
/* 13. Inherit all styles for sidenote layout                */
/* ========================================================= */
.markdown-body-with-sidenotes hr,
.markdown-body-with-sidenotes p,
.markdown-body-with-sidenotes strong,
.markdown-body-with-sidenotes em,
.markdown-body-with-sidenotes a,
.markdown-body-with-sidenotes ul,
.markdown-body-with-sidenotes ol,
.markdown-body-with-sidenotes li,
.markdown-body-with-sidenotes blockquote,
.markdown-body-with-sidenotes blockquote p,
.markdown-body-with-sidenotes blockquote cite,
.markdown-body-with-sidenotes blockquote footer,
.markdown-body-with-sidenotes blockquote.pull-quote,
.markdown-body-with-sidenotes pre,
.markdown-body-with-sidenotes code,
.markdown-body-with-sidenotes p code,
.markdown-body-with-sidenotes li code,
.markdown-body-with-sidenotes table code,
.markdown-body-with-sidenotes pre code,
.markdown-body-with-sidenotes img,
.markdown-body-with-sidenotes figure img,
.markdown-body-with-sidenotes figcaption,
.markdown-body-with-sidenotes table,
.markdown-body-with-sidenotes th,
.markdown-body-with-sidenotes td,
.markdown-body-with-sidenotes tr:nth-child(even),
.markdown-body-with-sidenotes sup,
.markdown-body-with-sidenotes .kicker,
.markdown-body-with-sidenotes .byline,
.markdown-body-with-sidenotes .feature,
.markdown-body-with-sidenotes .sidenote {
  /* Inherit from corresponding .markdown-body rules */
}

/* HR */
.markdown-body-with-sidenotes hr{
  border:0;
  border-top:var(--rule);
  margin:calc(var(--grid)*5) 0;
  opacity:0.9;
}

/* Paragraphs & inline */
.markdown-body-with-sidenotes p{
  font-weight:400;
  letter-spacing:-0.01em;
}
.markdown-body-with-sidenotes strong{ font-weight:800; }
.markdown-body-with-sidenotes em{ font-style:italic; font-weight:500; }

/* Links */
.markdown-body-with-sidenotes a{
  color:var(--ink);
  text-decoration:underline;
  text-decoration-thickness:2px;
  text-underline-offset:3px;
  font-weight:650;
  transition:background .08s ease,color .08s ease;
  padding:0 0.06em;
}
.markdown-body-with-sidenotes a:hover{
  background:var(--ink);
  color:var(--paper);
  text-decoration:none;
}

/* Lists */
.markdown-body-with-sidenotes ul,
.markdown-body-with-sidenotes ol{
  padding-left:1.6rem;
}
.markdown-body-with-sidenotes ul{ list-style-type:square; }
.markdown-body-with-sidenotes ol{
  list-style-type:decimal;
  font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,"Courier New",monospace;
}
.markdown-body-with-sidenotes li{
  margin-bottom:calc(var(--grid)*1.5);
  break-inside:avoid;
}

/* Quotes */
.markdown-body-with-sidenotes::after{
  content:"";
  display:block;
  clear:both;
}
.markdown-body-with-sidenotes blockquote{
  margin:calc(var(--grid)*4) 0;
  padding-left:calc(var(--grid)*2);
  border-left:4px solid var(--ink);
  font-style:italic;
  font-weight:500;
  background:transparent;
}
.markdown-body-with-sidenotes blockquote p{
  margin-bottom:calc(var(--grid)*1.5);
}
.markdown-body-with-sidenotes blockquote p:last-child{ margin-bottom:0; }
.markdown-body-with-sidenotes blockquote cite,
.markdown-body-with-sidenotes blockquote footer{
  display:block;
  margin-top:calc(var(--grid)*1.5);
  font-style:normal;
  font-weight:700;
  font-size:0.9rem;
  text-transform:uppercase;
  letter-spacing:0.06em;
}
.markdown-body-with-sidenotes blockquote.pull-quote{
  border:none;
  padding:0;
  font-style:normal;
  font-weight:900;
  font-size:clamp(1.45rem,2.4vw,1.95rem);
  line-height:1.25;
  letter-spacing:-0.02em;
  position:relative;
  margin:calc(var(--grid)*5) 0;
}
.markdown-body-with-sidenotes blockquote.pull-quote::before{
  content:"\201C";
  position:absolute;
  left:-0.18em;
  top:-0.45em;
  font-size:4.8em;
  font-weight:900;
  line-height:1;
  opacity:0.10;
  pointer-events:none;
}

/* Code */
.markdown-body-with-sidenotes pre{
  border:var(--rule);
  background:var(--ash-2);
  color:var(--ink);
  padding:calc(var(--grid)*2.5);
  overflow-x:auto;
  line-height:1.55;
  margin-bottom:calc(var(--grid)*4);
}
.markdown-body-with-sidenotes code{
  font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,Courier New,monospace;
  font-size:0.92em;
  font-weight:520;
}
.markdown-body-with-sidenotes p code,
.markdown-body-with-sidenotes li code,
.markdown-body-with-sidenotes table code{
  background:var(--ash);
  padding:0.05em 0.3em;
  margin:0 0.12em;
  font-weight:600;
  border:none;
}
.markdown-body-with-sidenotes pre code{
  background:transparent;
  padding:0; margin:0;
}

/* Images */
.markdown-body-with-sidenotes img,
.markdown-body-with-sidenotes figure img{
  border:var(--rule);
  max-width:100%;
  height:auto;
  margin:calc(var(--grid)*3) 0;
}
.markdown-body-with-sidenotes figcaption{
  font-size:0.9rem;
  font-weight:700;
  text-transform:uppercase;
  letter-spacing:0.06em;
  margin-top:calc(var(--grid)*1.25);
  opacity:0.9;
}

/* Tables */
.markdown-body-with-sidenotes table{
  width:100%;
  border-collapse:collapse !important;
  border:var(--rule) !important;
  background:var(--paper);
  margin:calc(var(--grid)*3) 0;
  font-size:0.98rem;
}
.markdown-body-with-sidenotes th,
.markdown-body-with-sidenotes td{
  border:1px solid var(--ink) !important;
  padding:calc(var(--grid)*1.25) calc(var(--grid)*1.75);
  text-align:left;
  vertical-align:top;
}
.markdown-body-with-sidenotes th{
  background:var(--ink) !important;
  color:var(--paper) !important;
  font-weight:900;
  text-transform:uppercase;
  letter-spacing:0.05em;
}
.markdown-body-with-sidenotes tr:nth-child(even){
  background:var(--ash-2);
}

/* Footnotes - sup link styling */
.markdown-body-with-sidenotes sup{
  font-size:0.75em;
  font-weight:800;
}

/* Footnotes heading */
.markdown-body-with-sidenotes .footnotes h2,
.markdown-body-with-sidenotes .footnotes hr {
  display: none;
}

/* Footnotes list styling */
.markdown-body-with-sidenotes .footnotes ol{
  list-style-type: none;
  padding-left: 0;
  font-family:inherit;
}

.markdown-body-with-sidenotes .footnotes li{
  margin-bottom: calc(var(--grid)*2);
  font-size: 0.85rem;
  line-height: 1.5;
}

.markdown-body-with-sidenotes .footnotes li p {
  margin-bottom: 0;
}

/* Utilities */
.markdown-body-with-sidenotes .kicker{
  font-size:0.82rem;
  font-weight:900;
  text-transform:uppercase;
  letter-spacing:0.12em;
  margin-bottom:calc(var(--grid)*1.25);
}
.markdown-body-with-sidenotes .byline{
  font-size:0.95rem;
  font-weight:700;
  text-transform:uppercase;
  letter-spacing:0.06em;
  margin-top:calc(var(--grid)*2);
}
.markdown-body-with-sidenotes .feature{
  border:var(--rule-strong);
  padding:calc(var(--grid)*3);
  margin:calc(var(--grid)*6) 0;
  background:var(--paper);
}
